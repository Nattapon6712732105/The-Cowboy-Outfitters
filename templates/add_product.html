{% extends "base.html" %}
{% block title %}‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - CowboyShop Admin{% endblock %}

{% block content %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CowboyShop - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Sarabun', sans-serif; }</style>
</head>
<body class="bg-slate-100 min-h-screen">

    <!-- Header/Navigation -->
    <nav class="bg-slate-800 text-white shadow-lg sticky top-0 z-50 border-b-4 border-slate-900">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-20">
                <a href="/employee-sell" class="flex items-center">
                    <div class="bg-slate-700 p-2 rounded-full border-2 border-slate-600 mr-2">
                        <i data-lucide="briefcase" class="h-6 w-6 text-slate-300"></i>
                    </div>
                    <span class="font-bold text-lg">COWBOYSHOP - ADMIN</span>
                </a>
                <div class="flex items-center space-x-4">
                    <a href="/employee-sell" class="flex items-center px-4 py-2 rounded-md text-sm font-medium text-slate-300 hover:bg-slate-700 transition">
                        <i data-lucide="arrow-left" class="h-4 w-4 mr-2"></i> ‡∏Å‡∏•‡∏±‡∏ö
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-2xl mx-auto px-4 py-8">
        <!-- Success State -->
        {% if success %}
        <div class="bg-white rounded-lg shadow-lg p-8 text-center mb-6">
            <div class="flex justify-center mb-4">
                <div class="bg-green-100 rounded-full p-4">
                    <i data-lucide="check-circle" class="w-12 h-12 text-green-600"></i>
                </div>
            </div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h1>
            <p class="text-gray-600 mb-4">{{ message }}</p>
            
            <div class="bg-slate-50 rounded-lg p-4 mb-6 border-2 border-slate-200">
                <p class="text-sm text-gray-600 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
                <p class="text-2xl font-bold text-slate-800">{{ product_id }}</p>
            </div>
            
            <div class="flex gap-3">
                <a href="/add-product" class="flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-4 rounded-lg transition flex items-center justify-center">
                    <i data-lucide="plus" class="w-4 h-4 mr-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô
                </a>
                <a href="/employee-sell" class="flex-1 bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-4 rounded-lg transition flex items-center justify-center">
                    <i data-lucide="list" class="w-4 h-4 mr-2"></i> ‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                </a>
            </div>
        </div>
        {% else %}
        <!-- Form -->
        <div class="bg-white rounded-lg shadow-lg p-8">
            <h1 class="text-3xl font-bold text-slate-800 mb-2 flex items-center">
                <i data-lucide="plus-circle" class="w-8 h-8 text-slate-600 mr-3"></i>
                ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </h1>
            <p class="text-gray-600 mb-6">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</p>

            <!-- Error Message -->
            {% if error %}
            <div class="bg-red-50 border-2 border-red-300 text-red-700 px-4 py-3 rounded-lg mb-6 flex items-center">
                <i data-lucide="alert-circle" class="w-5 h-5 mr-2 flex-shrink-0"></i>
                <span>{{ error }}</span>
            </div>
            {% endif %}

            <form method="POST" enctype="multipart/form-data" class="space-y-6">
                {% csrf_token %}

                <!-- Product Info Section -->
                <div class="border-b-2 border-slate-100 pb-6">
                    <h2 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                        <i data-lucide="package" class="w-5 h-5 text-slate-600 mr-2"></i>
                        ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                    </h2>
                    
                    <div class="space-y-4">
                        <!-- Product Name -->
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                            <input type="text" name="name" 
                                   placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏≤‡∏•‡∏≤‡πÄ‡∏î‡πá‡∏ï ‡∏™‡πÑ‡∏•‡∏î‡πå" 
                                   class="w-full px-4 py-2 border-2 border-slate-300 rounded-lg focus:outline-none focus:border-slate-600 transition"
                                   required>
                        </div>

                        <!-- Category & Price Row -->
                        <div class="grid grid-cols-2 gap-4">
                            <!-- Category -->
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà *</label>
                                <select name="category" class="w-full px-4 py-2 border-2 border-slate-300 rounded-lg focus:outline-none focus:border-slate-600 transition" required>
                                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà --</option>
                                    {% for code, label in categories %}
                                        <option value="{{ code }}">{{ label }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <!-- Price -->
                            <div>
                                <label class="block text-sm font-bold text-slate-700 mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó) *</label>
                                <input type="number" name="price" 
                                       placeholder="0.00" 
                                       step="0.01"
                                       min="0"
                                       class="w-full px-4 py-2 border-2 border-slate-300 rounded-lg focus:outline-none focus:border-slate-600 transition"
                                       required>
                            </div>
                        </div>

                        <!-- Stock -->
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏´‡∏ô‡πà‡∏ß‡∏¢)</label>
                            <div class="flex items-center border-2 border-slate-300 rounded-lg">
                                <button type="button" onclick="decreaseStock()" class="px-4 py-2 text-slate-600 hover:text-slate-800">-</button>
                                <input type="number" name="stock" id="stock"
                                       value="0" 
                                       min="0" 
                                       class="flex-1 text-center py-2 border-0 focus:outline-none">
                                <button type="button" onclick="increaseStock()" class="px-4 py-2 text-slate-600 hover:text-slate-800">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Description & Image Section -->
                <div class="border-b-2 border-slate-100 pb-6">
                    <h2 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                        <i data-lucide="edit" class="w-5 h-5 text-slate-600 mr-2"></i>
                        ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
                    </h2>

                    <!-- Description -->
                    <div class="mb-4">
                        <label class="block text-sm font-bold text-slate-700 mb-2">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                        <textarea name="description" 
                                  placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏≤‡∏•‡∏≤‡πÄ‡∏î‡πá‡∏ï ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏´‡∏±‡πà‡∏ô‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà..."
                                  rows="3"
                                  class="w-full px-4 py-2 border-2 border-slate-300 rounded-lg focus:outline-none focus:border-slate-600 transition"></textarea>
                    </div>

                    <!-- Image Upload -->
                    <div>
                        <label class="block text-sm font-bold text-slate-700 mb-2">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                        <div class="relative border-2 border-dashed border-slate-300 rounded-lg p-4 text-center hover:border-slate-400 transition cursor-pointer">
                            <input type="file" name="image" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                            <div>
                                <i data-lucide="image" class="w-8 h-8 text-slate-400 mx-auto mb-2"></i>
                                <p class="text-slate-600 font-medium">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
                                <p class="text-xs text-slate-500">‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏ß‡∏≤‡∏á</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Info Box -->
                <div class="bg-slate-50 border-2 border-slate-200 rounded-lg p-4 flex gap-3">
                    <i data-lucide="info" class="w-5 h-5 text-slate-600 flex-shrink-0 mt-0.5"></i>
                    <div class="text-sm text-slate-700">
                        <p class="font-bold mb-1">üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
                        <p>‚Ä¢ ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏ß‡∏£‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</p>
                        <p>‚Ä¢ ‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
                        <p>‚Ä¢ ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</p>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="flex gap-3 pt-4">
                    <a href="/employee-sell" class="flex-1 bg-slate-300 hover:bg-slate-400 text-slate-800 font-bold py-3 px-4 rounded-lg transition flex items-center justify-center">
                        <i data-lucide="x" class="w-4 h-4 mr-2"></i> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </a>
                    <button type="submit" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition flex items-center justify-center">
                        <i data-lucide="plus" class="w-4 h-4 mr-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                    </button>
                </div>
            </form>
        </div>
        {% endif %}
    </div>

    <script>
        lucide.createIcons();

        function increaseStock() {
            const input = document.getElementById('stock');
            input.value = parseInt(input.value) + 1;
        }

        function decreaseStock() {
            const input = document.getElementById('stock');
            if (parseInt(input.value) > 0) {
                input.value = parseInt(input.value) - 1;
            }
        }

        // File input styling
        const fileInput = document.querySelector('input[type="file"]');
        if (fileInput) {
            fileInput.addEventListener('change', function() {
                const parent = this.parentElement;
                if (this.files && this.files[0]) {
                    parent.innerHTML = `
                        <div class="text-center">
                            <i data-lucide="check-circle" class="w-8 h-8 text-green-600 mx-auto mb-2"></i>
                            <p class="text-green-600 font-medium">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${this.files[0].name}</p>
                        </div>
                    `;
                    lucide.createIcons();
                }
            });
        }
    </script>
</body>
</html>
{% endblock %}
