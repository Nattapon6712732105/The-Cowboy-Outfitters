<!DOCTYPE html>
{% load static %}
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CowboyShop - ‡∏ä‡∏∏‡∏î‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏≤‡∏ß‡∏ö‡∏≠‡∏¢‡∏™‡∏∏‡∏î‡πÄ‡∏ó‡πà{% endblock %}</title>
    <!-- ‡πÉ‡∏ä‡πâ Tailwind CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏•‡∏¢‡πå‡πÄ‡∏≠‡∏≤‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏±‡∏ß (Serif) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ß‡∏¥‡∏ô‡πÄ‡∏ó‡∏à/‡∏Ñ‡∏≤‡∏ß‡∏ö‡∏≠‡∏¢ -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #fdf8f2; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏£‡∏µ‡∏°‡∏≠‡πà‡∏≠‡∏ô‡πÜ */
        }
        .western-font {
            font-family: 'Playfair+Display', serif;
        }
        .cowboy-brown {
            background-color: #E0C38D; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏ö‡∏ö‡∏´‡∏ô‡∏±‡∏á */
        }
        .cowboy-accent {
            color: #a1887f;
        }
        .btn-western {
            background-color: #8d6e63;
            transition: all 0.3s ease;
        }
        .btn-western:hover {
            background-color: #5d4037;
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å (Navigation Bar) -->
    <nav class="cowboy-brown text-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô PDF -->
                <div class="flex-shrink-0">
                    <a href="/">
                        <img class="h-20 w-auto" src="{% static 'images/hatlogo.jpg' %}" alt="CowboyShop ">
                    </a>
                </div>

                <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-6">
                        <a href="/" class="hover:text-orange-200 px-3 py-2 rounded-md text-sm font-medium">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
                        <a href="/chat" class="hover:text-orange-200 px-3 py-2 rounded-md text-sm font-medium">üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</a>
                    </div>
                </div>

                <!-- ‡∏õ‡∏∏‡πà‡∏° Login/Profile ‡∏ï‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏´‡∏ô‡πâ‡∏≤ 1 -->
                <div class="flex items-center space-x-4">
                    {% if user.is_authenticated %}
                        <div class="relative">
                            <button onclick="toggleProfileMenu()" class="hover:text-orange-200 px-4 py-2 rounded-md text-sm font-medium flex items-center bg-amber-800 rounded-lg py-2">
                                üë§ {{ user.first_name|default:user.username }}
                            </button>
                            <div id="profileMenu" class="hidden absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-2xl z-50 border border-amber-200 overflow-hidden">
                                <a href="/profile" class="block px-4 py-3 text-gray-800 hover:bg-amber-100 transition font-medium">üìä ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
                                <a href="/product" class="block px-4 py-3 text-gray-800 hover:bg-amber-100 transition font-medium">üõí ‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
                                <hr class="border-amber-100">
                                <a href="/logout" class="block px-4 py-3 text-red-600 hover:bg-red-100 transition font-medium">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
                            </div>
                        </div>
                    {% else %}
                        <a href="/login" class="hover:text-orange-200 px-4 py-2 rounded-md text-sm font-medium">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤ (Block Content) -->
    <main class="flex-grow container mx-auto px-4 py-8">
        {% block content %}
        <!-- ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Home.html ‡∏´‡∏£‡∏∑‡∏≠ Cat.html ‡∏à‡∏∞‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
        <div class="text-center py-20">
            <h1 class="text-4xl font-bold text-stone-700 mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà CowboyShop</h1>
            <p class="text-stone-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...</p>
        </div>
        {% endblock %}
    </main>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö (Footer) -->
    <footer class="bg-stone-900 text-stone-400 py-10">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="western-font text-xl text-white mb-2">CowboyShop Official</p>
            <p class="text-sm">‡πÅ‡∏´‡∏•‡πà‡∏á‡∏£‡∏ß‡∏°‡∏ä‡∏∏‡∏î‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏≤‡∏ß‡∏ö‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
            <div class="mt-4 flex justify-center space-x-4">
                <span>Facebook</span>
                <span>Line</span>
                <span>Instagram</span>
            </div>
            <p class="mt-8 text-xs opacity-50">&copy; 2024 CowboyShop Project. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏î‡∏¢ Django & Supabase</p>
        </div>
    </footer>

    <!-- Shop Modal -->
    <div id="shopModal" class="hidden fixed inset-0 bg-black/50 z-40 flex items-center justify-center p-4">
        <!-- Modal Content -->
        <div class="bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-2xl border-4 border-amber-800">
            <!-- Close Button -->
            <button onclick="closeShopModal()" class="absolute top-4 right-4 z-50 bg-amber-700 hover:bg-amber-800 text-white p-2 rounded-full transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>

            <div class="flex flex-col md:flex-row h-full">
                <!-- Left Side - Product Image -->
                <div class="md:w-1/2 bg-gradient-to-br from-amber-100 to-amber-200 p-8 flex flex-col justify-between">
                    <div class="text-center">
                        <button onclick="toggleSaved()" class="inline-block mb-4 transition-transform hover:scale-110">
                            <i id="starIcon" data-lucide="star" class="w-12 h-12 text-amber-600 fill-current"></i>
                        </button>
                    </div>
                    <div class="flex-1 flex items-center justify-center">
                        <img id="shopProductImage" src="" alt="‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" class="w-full h-64 object-cover rounded-lg shadow-lg">
                    </div>
                    <div class="text-center mt-4">
                        <p class="text-amber-900 font-medium text-sm">‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
                    </div>
                </div>

                <!-- Right Side - Product Details -->
                <div class="md:w-1/2 p-8 flex flex-col justify-between bg-amber-50">
                    <!-- Status Section -->
                    <div>
                        <h2 class="text-2xl font-bold text-amber-900 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ì‡∏∞</h2>
                        <div id="shopProductName" class="text-lg font-semibold text-gray-800 mb-4"></div>
                        <div class="bg-white border-2 border-amber-300 rounded-lg p-4 mb-6">
                            <p class="text-gray-600 mb-2"><span class="font-medium">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</span> <span id="shopProductCategory"></span></p>
                            <p class="text-gray-600 mb-2"><span class="font-medium">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</span> <span id="shopProductDesc"></span></p>
                            <p class="text-2xl font-bold text-amber-800">‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ø<span id="shopProductPrice"></span></p>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button onclick="saveShopping()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg">
                            ‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤
                        </button>
                        <button onclick="closeShopModal()" class="w-full bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        lucide.createIcons();
        
        let currentProduct = null;
        let isSaved = false;

        const allProducts = [
            { id: 1, name: "‡∏´‡∏°‡∏ß‡∏Å‡∏Ñ‡∏≤‡∏ß‡∏ö‡∏≠‡∏¢‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏ó‡πâ", category: "‡∏´‡∏°‡∏ß‡∏Å", price: 2500, image: "https://images.unsplash.com/photo-1559563458-52c69f8f1f6c?auto=format&fit=crop&q=80&w=800", desc: "‡∏´‡∏°‡∏ß‡∏Å‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏ó‡πâ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏• ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô" },
            { id: 2, name: "‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ö‡∏π‡∏ó‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å", category: "‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤", price: 4500, image: "https://images.unsplash.com/photo-1534963503144-8d48b10bc6a9?auto=format&fit=crop&q=80&w=800", desc: "‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ö‡∏π‡∏ó‡∏´‡∏ô‡∏±‡∏á‡πÅ‡∏Å‡∏∞‡∏™‡∏•‡∏±‡∏Å‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢" },
            { id: 3, name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡∏¥‡πâ‡∏ï‡∏•‡∏≤‡∏¢‡∏™‡∏Å‡πä‡∏≠‡∏ï", category: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤", price: 1200, image: "https://images.unsplash.com/photo-1534653299134-96a171b61581?auto=format&fit=crop&q=80&w=800", desc: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡∏¥‡πâ‡∏ï‡∏ú‡πâ‡∏≤‡∏ù‡πâ‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ" },
            { id: 4, name: "‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î‡∏´‡∏±‡∏ß‡∏Å‡∏£‡∏∞‡∏ó‡∏¥‡∏á", category: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö", price: 1800, image: "https://images.unsplash.com/photo-1624222247344-550fb60583dc?auto=format&fit=crop&q=80&w=800", desc: "‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î‡∏´‡∏ô‡∏±‡∏á‡πÄ‡∏Å‡∏£‡∏î‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°" },
            { id: 5, name: "‡πÅ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï‡∏¢‡∏µ‡∏ô‡∏™‡πå", category: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤", price: 3200, image: "https://images.unsplash.com/photo-1605908502724-9093a79a1b39?auto=format&fit=crop&q=80&w=800", desc: "‡πÅ‡∏à‡πá‡∏Ñ‡πÄ‡∏Å‡πá‡∏ï‡∏¢‡∏µ‡∏ô‡∏™‡πå‡∏ü‡∏≠‡∏Å‡∏™‡∏µ ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ß‡∏¥‡∏ô‡πÄ‡∏ó‡∏à" },
            { id: 6, name: "‡πÄ‡∏ä‡∏∑‡∏≠‡∏Å‡∏ö‡πà‡∏ß‡∏á‡∏ö‡∏≤‡∏®", category: "‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå", price: 850, image: "https://images.unsplash.com/photo-1599596373756-3c58b4566c1b?auto=format&fit=crop&q=80&w=800", desc: "‡πÄ‡∏ä‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏ã‡πâ‡∏≠‡∏°" }
        ];

        function openShopModal(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (!product) return;

            currentProduct = product;
            isSaved = false;

            // Update modal content
            document.getElementById('shopProductName').textContent = product.name;
            document.getElementById('shopProductCategory').textContent = product.category;
            document.getElementById('shopProductDesc').textContent = product.desc;
            document.getElementById('shopProductPrice').textContent = product.price.toLocaleString();
            document.getElementById('shopProductImage').src = product.image;

            // Reset star icon
            const starIcon = document.getElementById('starIcon');
            starIcon.classList.add('text-amber-600');
            starIcon.classList.remove('text-yellow-500');

            // Show modal
            document.getElementById('shopModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeShopModal() {
            document.getElementById('shopModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            currentProduct = null;
            isSaved = false;
        }

        function toggleSaved() {
            isSaved = !isSaved;
            const starIcon = document.getElementById('starIcon');
            if (isSaved) {
                starIcon.classList.remove('text-amber-600');
                starIcon.classList.add('text-yellow-500');
            } else {
                starIcon.classList.add('text-amber-600');
                starIcon.classList.remove('text-yellow-500');
            }
        }

        function saveShopping() {
            if (!currentProduct) return;
            
            if (isSaved) {
                alert(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á: ${currentProduct.name} (${currentProduct.price} ‡∏ö‡∏≤‡∏ó)`);
            } else {
                alert(`‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ${currentProduct.name} (${currentProduct.price} ‡∏ö‡∏≤‡∏ó)`);
            }
            closeShopModal();
        }

        // Close modal when clicking outside
        document.getElementById('shopModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeShopModal();
            }
        });

        // Toggle Profile Menu
        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        // Close profile menu when clicking outside
        document.addEventListener('click', function(e) {
            const profileMenu = document.getElementById('profileMenu');
            const profileButton = e.target.closest('button[onclick="toggleProfileMenu()"]');
            
            if (profileMenu && !profileButton && !e.target.closest('#profileMenu')) {
                profileMenu.classList.add('hidden');
            }
        });
    </script>
</body>
</html>